# 前書
一般にバーチャルキャスト、VRChat等で手と足以外を動かそうと思うと、HTCさんのトラッカーを使う必要があります。

<img src="https://www.moguravr.com/wp-content/uploads/2017/02/201702011112078000-1.jpg" width="50%" alt="参考画像"/>

(引用元: https://www.moguravr.com/taipei-vr/)

なので以下の費用が一般には必要になります。

* トラッカー 2個(腰にもつけると3個) ＞30000円～45000円位
* HTC Viveを使ってない場合ベースステーション＞17000円位

なので追加で必要な予算は30000円～62000円になります。

毎度、ここらへんのコンセプトは<span style="color: red;">「お金がなければ手間をかける」</span>となっています。<br>
なので手を動かして少しでもそういう雰囲気に近づくために出来ることを書いてみます。


# 今回の方法

[Driver4VR](https://www.driver4vr.com/) というアプリが昔からあります。
これはVR向けの複数種類のトラッキング情報を入り混ぜて使用する為のアプリで、
* 頭と手の情報はHMDとコントローラを使って他の体の情報はKinectを使う
* 3DoFのHMDを使って頭や手足の情報はPSMoveを使う
* 頭の情報は3つのLEDの位置関係から距離と位置を検知するOpenTrackを使い、手足はゲームコントローラを使う

の用に複数のデバイスの手足頭の位置情報デバイスを入り混じって使用できるようになるものです。
今回使用するのは、2019/11/27に追加された、「QRコードを張った箱をニセトラッカーとして使う」方法です。<br>
(元情報は[こちら](https://www.driver4vr.com/forums/topic/driver4vr-body-tracking-with-camera-markers-alpha-relase-1/)になります。)

## 用意するもの
* PSEye<br>
  ないしはFPS値ができるだけ高いWebカメラ
* トラッカーの代用とする[マーカー画像](https://www.driver4vr.com/files/Driver4VR%20Markers-Alpha1.pdf)を印刷したもの。
* ダンボールなど上記の画像を箱状に配置する手段<br>
後述する画像のようなものを作れるものを用立てて下さい。
* 足に固定する方法<br>
クロックスなどが便利です。
* [Driver4VR](https://www.driver4vr.com/) <br>今回の内容を実現するアプリです。$19.97 (約2500円)ですが、7日間について連続10分間の試用期間を持つことが出来ます。

## 方法の概略

今回の方法について概略について記載します。<br>
2019-11-27に[Driver4VRのα版アップデート](https://www.driver4vr.com/forums/topic/driver4vr-body-tracking-with-camera-markers-alpha-relase-1/)があり、以下の機能が追加されました。
* Aruco Markerと言う高速認識に適したQRコードを箱状に配置して、そのQRコードの向きを判定することで、トラッカーの代わりが出来る。<br>
  <img src="https://bmimg.nicovideo.jp/image/ch2636926/241815/19703aa6985cbe6d2c9cae6aef8d836fb5f9a7b7.jpg" width="25%">
* トラッカーを撮影するカメラが1つ必要でそれがあれば場所を特定することが出来る。<br>
カメラの性能が必要で、出来れば60fpsで撮影可能なものが必要なのですが、恐らく一番安価で入手可能な60fps出すことが出来るWebカメラが中古のPSEyeになります。<br>基本的に中古のPSEyeは現在1500円～3000円位で買うことが出来ます。
* 2個のAruco Markerの箱を足につけて、足トラの代替とする。

んでは実際の方法になります。

### マーカーを作る
1. [マーカー画像](https://www.driver4vr.com/files/Driver4VR%20Markers-Alpha1.pdf)を印刷します。<br>試してみた所、カメラから220cm x 140cm 程の範囲をトラッキングしようと思った際には、マーカーのサイズは13cm四方が必要でした。640x480ではそれより小さくなると判別できないようです。<br>A5サイズで印刷すると丁度13cm四方になります。
2. 
